var F={on:function(e,t,i){if(e.attachEvent){e.attachEvent("on"+t,function(){i.apply(e,arguments)})}else{e.addEventListener(t,i,false)}},addcss:function(e,t){var t=t||this.css,i=e.className.replace(/\s{2,}/g," ").split(" "),s=true;for(var n=0,o=i.length;n<o;n++){if(i[n]==t){s=false;break}}if(s){e.className=i.join(" ")+" "+t}if(t==this.css){this.zt=true}},hascss:function(e,t){var t=t||this.css,i=e.className.replace(/\s{2,}/g," ").split(" "),s=false;for(var n=0,o=i.length;n<o;n++){if(i[n]==t){s=true;break}}return s},remove:function(e,t){var t=t||this.css,i=e.className.replace(/\s{2,}/g," ").split(" "),s=[];for(var n=0,o=i.length;n<o;n++){if(i[n]!=t){s.push(i[n])}}e.className=s.join(" ")},css:"F_css",ts:"",zt:false,st1:function(em){eval("var re = new RegExp(/"+em.getAttribute("exp")+"/)");if(!re.test(em.value)){this.addcss(em);this.ts+=this.tsf(em,"格式不正确！")}else{this.remove(em)}},st2:function(e){if(e.type=="checkbox"&&e.checked==false){this.addcss(e);this.ts+="请选择"+this.tsf(e,"")+"！<br>"}else if(e.value.replace(/\s/g,"")==""||typeof e.getAttribute("def")=="string"&&e.value==e.getAttribute("def")){this.addcss(e);this.ts+=this.tsf(e,"不能为空！")}else if(e.type=="checkbox"&&e.checked==true){this.remove(e)}else if(e.value.replace(/\s/g,"")!=""){this.remove(e)}},st3:function(em){if(em.value!=""){eval("var re = new RegExp(/"+em.getAttribute("exp")+"/)");if(re.test(em.value)){this.remove(em);this.ts+=this.tsf(em,"格式不正确！")}else{this.addcss(em)}}else{this.remove(em)}},st4:function(e){if(e.value==""){e.value=e.getAttribute("def");if(typeof e.form.getAttribute("dcss")=="string"){this.addcss(e,e.form.getAttribute("dcss"))}}},st5:function(e){if(e.value==e.getAttribute("def")){e.value="";if(typeof e.form.getAttribute("dcss")=="string"){this.remove(e,e.form.getAttribute("dcss"))}}},tsf:function(e,t){if(typeof e.getAttribute("ts")=="string"){var i=e.getAttribute("ts");if(i){return i+"<br>"}else{return""}}else{return A.s(e.parentNode).innerHTML+t+"<br>"}},st:function(){var e=document.forms;for(var t=0,i=e.length;t<i;t++){if(typeof e[t].f!="undefined"){continue}e[t].f=false;for(var s=0,n=e[t].length;s<n;s++){if(typeof e[t][s]!="undefined"){if(typeof e[t][s].getAttribute("req")=="string"&&e[t][s].getAttribute("req")=="true"){if(typeof e[t][s].getAttribute("exp")=="string"){this.on(e[t][s],"blur",function(){F.st1(this)})}else{this.on(e[t][s],"blur",function(){F.st2(this)})}}else if(typeof e[t][s].getAttribute("exp")=="string"){this.on(e[t][s],"blur",function(){F.st3(this)})}if(typeof e[t][s].getAttribute("fname")=="string"){this.aimg(e[t][s])}if(e[t][s]&&typeof e[t][s].getAttribute("def")=="string"){this.on(e[t][s],"blur",function(){F.st4(this)});this.on(e[t][s],"focus",function(){F.st5(this)})}}}this.on(e[t],"submit",function(e){F.zt=false;F.ts="";for(var t=0,i=this.length;t<i;t++){if(typeof this[t].getAttribute("req")=="string"&&this[t].getAttribute("req")=="true"){if(this[t].type=="radio"){var s=this[this[t].name],n=true;for(var o=0;o<s.length;o++){if(s[o].checked){n=false;break}}if(n){F.addcss(s[0]);F.ts+=F.tsf(this[t],"不能为空！",true)}t+=s.length-1}else if(typeof this[t].getAttribute("exp")=="string"){F.st1(this[t])}else{F.st2(this[t])}}else if(typeof this[t].getAttribute("exp")=="string"){F.st3(this[t])}if(this[t]&&typeof this[t].getAttribute("def")=="string"){if(this[t].value==this[t].getAttribute("def")){this[t].value=""}}}if(F.zt){if(F.ts){ui.alert(F.ts.replace(/：/g,""))}if(e.preventDefault)e.preventDefault();else e.returnValue=false}else{this.f=true;if(this.fun){this.fun()}}});if(typeof e[t].getAttribute("onsubmit")!="undefined"){e[t].fun=e[t].onsubmit;e[t].onsubmit=""}}},aimg:function(e){var t=e.getAttribute("fname");var i=e.getAttribute("funbak");var s=e.getAttribute("funstr")||false;var n=e.getAttribute("furl")||window.location.href;var o=A.$$("div");var r=e.offsetWidth+140;o.style.position="absolute";o.style.zIndex=99;o.style.overflow="hidden";o.style.filter="alpha(opacity=0)";o.style.opacity="0.0";o.style.display="none";if(A.$(t+"_i")){A.d(A.$(t+"_i").parentNode)}o.innerHTML='<form method="post" enctype="multipart/form-data" action="'+n+'" target="'+t+'_i" ><input type="file" onchange="this.form.submit();F.upimg(\''+t+"_i','"+i+"',"+s+');" name="'+t+'" style="margin-left:-140px;cursor:pointer; width:'+r+'px;" /></form><iframe name="'+t+'_i" id="'+t+'_i" style="display:none"></iframe>';e.ob=o;F.on(e,"mouseover",function(){var e=A.wz(this);var t=this.offsetWidth;var i=this.offsetHeight;var s=0,n=this.parentNode;while(n&&n.tagName.toLowerCase()!="body"){if(n.scrollTop)s+=parseInt(n.scrollTop);n=n.parentNode}this.ob.style.display="block";this.ob.style.top=e.y-s+"px";this.ob.style.left=e.x+"px";this.ob.style.height=i+"px";this.ob.style.width=t+"px";var o=this.ob.children[0];o.style.height=i+"px";o.style.width=t+"px";o.style.overflow="hidden";o.children[0].style.height=i+"px";var r=this;if(typeof this.f=="undefined"||!this.f){this.f=setInterval(function(){if(typeof r.offsetHeight=="undefined"||!r.offsetHeight){r.ob.style.display="none";clearInterval(r.f);r.f=""}},100)}});document.body.appendChild(o);o.children[0].f=true},upimg:function(a,b,f){if(f){f()}try{var s=window.frames[a].document.body.innerHTML}catch(e){var s=""}if(s){eval("s="+s);window.frames[a].document.body.innerHTML="";if(typeof b=="string"){eval(b+"(s)")}else{b(s)}}else{setTimeout(function(){F.upimg(a,b,false)},500)}}};var A={$:function(e){return document.getElementById(e)},$$:function(e){if(e.indexOf("<")==-1){return document.createElement(e)}else{var t=document.createElement("div");t.innerHTML=e;return t.children[0]}},r:function(e,t,i){if(i){return Math.random()*(t-e)+e}else{return Math.round(Math.random()*(t-e)+e)}},d:function(e){e.parentNode.removeChild(e)},wc:function(e,t,i){var s=new Date((new Date).getTime()+1e3*i);s="; expires="+s.toGMTString();document.cookie=e+"="+escape(t)+s},s:function(e){return e.previousElementSibling||e.previousSibling},x:function(e){return e.nextElementSibling||e.nextSibling},rc:function(e){var t="";var i=e+"=";if(document.cookie.length>0){w=document.cookie.indexOf(i);if(w!=-1){w+=i.length;end=document.cookie.indexOf(";",w);if(end==-1)end=document.cookie.length;t=unescape(document.cookie.substring(w,end))}}return t},ajone:[],aj:function(url,data,f,gs){var self=this;var k=url.replace(/[^\w]/g,"");if(typeof self.ajone[k]=="undefined"){self.ajone[k]=true;if(window.XMLHttpRequest){var xm=new XMLHttpRequest}else{var M=["MSXML2.XMLHTTP","Microsoft.XMLHTTP","MSXML2.XMLHTTP.5.0","MSXML2.XMLHTTP.4.0","MSXML2.XMLHTTP.3.0"];for(n=0;n<M.length;n++){try{var xm=new ActiveXObject(M[n]);break}catch(e){}}}xm.open("post",url,true);xm.setRequestHeader("is_ajax","1");xm.onreadystatechange=function(){if(xm.readyState==4){if(xm.status==200){delete self.ajone[k];if(f){if(typeof f=="string")A.$(f).innerHTML=xm.responseText;else{if(gs&&gs=="json"){eval("var _j="+xm.responseText);eval(f(_j))}else eval(f(xm.responseText))}}}}};xm.setRequestHeader("Content-Type","application/x-www-form-urlencoded;");xm.send(data)}},wz:function(t){var i=t.offsetTop;var s=t.offsetLeft;e=t.offsetParent;while(e){i+=e.offsetTop;s+=e.offsetLeft;e=e.offsetParent}return{y:i,x:s}},fnr:function(e){var t=[];for(var i=0,s=e.length;i<s;i++){if(e[i].name&&e[i].name!=""){switch(e[i].tagName.toLowerCase()){case"select":for(var n=0;n<e[i].length;n++){if(e[i][n].selected){t.push(e[i].name+"="+encodeURIComponent(e[i][n].value))}};break;default:switch(e[i].type.toLowerCase()){case"radio":var o=e[e[i].name];for(var n=0;n<o.length;n++){if(o[n].checked){t.push(o[n].name+"="+encodeURIComponent(o[n].value));break}};i+=o.length-1;break;case"checkbox":if(e[i].checked){t.push(e[i].name+"="+encodeURIComponent(e[i].value))};break;default:t.push(e[i].name+"="+encodeURIComponent(e[i].value));break}}}}return t.join("&")},fsnr:function(e){var t=[];for(var i=0,s=e.length;i<s;i++){if(typeof e[i]=="object"){t.push(this.fnr(e[i]))}else{if(document.forms[e[i]]){t.push(this.fnr(document.forms[e[i]]))}}}return t.join("&")}};(function(e){var t=e.document;var i=e.ui={};var s=false,n=false;i.alert=function(e,t,i){if(typeof i=="undefined"||i==true){new f({c:true,t:t})}new f({c:true,s:e,css:"ui_alert",t:t})};i.error=function(e,t,i){if(typeof i=="undefined"||i==true){new f({c:true,t:t})}new f({c:true,s:e,css:"ui_error",t:t})};i.success=function(e,t,i){if(typeof i=="undefined"||i==true){new f({c:true,t:t})}new f({c:true,s:e,css:"ui_success",t:t})};i.notice=function(e,t,i){if(typeof i=="undefined"||i==true){new f({c:true,t:t})}new f({c:true,s:e,css:"ui_notice",t:t})};i.confirm=function(e,t,i){if(i){s=new f({c:false})}else{s=false}new f({c:false,s:e,css:"ui_confirm",f:t})};i.prompt=function(e,t,i){if(i){s=new f({c:false})}else{s=false}new f({c:false,s:e,css:"ui_prompt",f:t})};i.box=function(e,t,i,o,r,c){if(o){s=new f({c:false})}else{s=false}return n=new f({c:false,title:e,obj:t,css:"ui_box",data:i,fun:r,wh:c})};i.move=function(e,t,i){function s(e,t,i){var s=this;s.yb=t;s.ob=e;e.onmousedown=function(e){var e=e||event;var t=A.wz(this);s.x=e.clientX-t.x;var n=i=="absolute"?document.body.scrollTop+document.documentElement.scrollTop:0;s.y=e.clientY+n-t.y;s.yb.style.position=i;try{e.preventDefault()}catch(t){e.returnValue=false}document.onmousemove=function(e){var e=e||event;var t=i=="absolute"?document.body.scrollTop+document.documentElement.scrollTop:0;s.yb.style.top=e.clientY+t-s.y+"px";s.yb.style.left=e.clientX-s.x+"px"}};e.onmouseup=function(){document.onmousemove=""}}if(typeof e!="object"){e=A.$(e)}if(typeof t=="string"){t=A.$(t)}new s(e,t||e.parentNode,i||"absolute")};var o=document.getElementsByTagName("script");for(var r=0;r<o.length;r++){if(o[r].getAttribute("src")&&o[r].getAttribute("src").indexOf("yu.js")>-1){var c=o[r].getAttribute("src").replace(/\/[^\/]*$/,"").replace(/(\/?)[^\/]*$/,"$1");break}}function f(e){this.cj=function(){this.G_d=t.createElement("div");this.G_d.style.position="absolute";this.G_d.style.zIndex=99;this.G_d.style.top="0px";this.G_d.style.left="0px";this.G_d.style.filter="alpha(opacity=0)";this.G_d.style.opacity=0;this.G_d.style.width=Math.max(t.documentElement.scrollWidth,t.documentElement.clientWidth)+"px";this.G_d.style.height=Math.max(t.documentElement.scrollHeight,t.documentElement.clientHeight)+"px";this.G_d.style.margin="0px";this.G_d.style.padding="0px";this.G_d.style.backgroundColor="#999999";this.iecss="";t.body.appendChild(this.G_d);if(typeof e.css=="string"){if(t.all&&e.css!="ui_box"){this.iecss=' progid:DXImageTransform.Microsoft.Shadow(Strength=4, Direction=135, Color="#CCCCCC",positive=1) progid:DXImageTransform.Microsoft.gradient(startColorstr="#FAFAFA", endColorstr="#E3E3E3")';if(e.css=="ui_box"){this.iecss=' progid:DXImageTransform.Microsoft.Shadow(Strength=4, Direction=135, Color="#CCCCCC",positive=1)'}}this.G_d.style.width="auto";this.G_d.style.height="auto";this.G_d.style.backgroundColor="transparent";this.G_d.className=e.css;if(e.css=="ui_confirm"){this.G_d.innerHTML='<p class="ui_msg">'+e.s+'</p><p class="ui_p"><input type="button" class="ui_button" value="确认" /><input type="button" class="ui_button ui_button_r" value="取消" /></p>';var o=this.G_d.children[1];o.children[0].G_d=this.G_d;o.children[0].yc=this.yc;o.children[0].f=e.f;if(s){o.children[0].c=s}o.children[0].onclick=function(){this.yc(1);if(this.c){this.c.yc(.5)}this.f(true)};o.children[1].G_d=this.G_d;o.children[1].yc=this.yc;o.children[1].f=e.f;if(s){o.children[1].c=s}o.children[1].onclick=function(){this.yc(1);if(this.c){this.c.yc(.5)}this.f(false)}}else if(e.css=="ui_prompt"){this.G_d.innerHTML='<p class="ui_p1">'+e.s+'</p><p class="ui_p2"><input type="text" class="ui_text" /></p><p class="ui_p"><input type="button" class="ui_button" value="确认" /><input type="button" class="ui_button ui_button_r" value="取消" /></p>';var o=this.G_d.children[2];o.children[0].G_d=this.G_d;o.children[0].yc=this.yc;o.children[0].f=e.f;if(s){o.children[0].c=s}o.children[0].onclick=function(){this.yc(1);if(this.c){this.c.yc(.5)}this.f(this.parentNode.parentNode.children[1].children[0].value)};o.children[1].G_d=this.G_d;o.children[1].yc=this.yc;o.children[1].f=e.f;if(s){o.children[1].c=s}o.children[1].onclick=function(){this.yc(1);if(this.c){this.c.yc(.5)}this.f(false)};this.G_d.children[1].children[0].focus()}else if(e.css=="ui_box"){this.G_d.innerHTML='<div class="ui_box_title"><strong></strong></div><div class="ui_box_content"></div><span class="span"></span>';this.G_d.style.backgroundColor="#FFFFFF";var o=this.G_d.children[0];i.move(o);var r=this.G_d.children[1];o.children[0].innerHTML=e.title;this.G_d.children[2].G_d=this.G_d;this.G_d.children[2].yc=this.yc;if(s){this.G_d.children[2].c=s}this.G_d.children[2].onclick=function(){this.yc(1);if(this.c){this.c.yc(.5)}};this.close=function(){this.G_d.children[2].onclick();try{delete this}catch(e){}};if(typeof e.obj=="object"){r.innerHTML=e.obj.innerHTML}else if(e.obj.match(/(<[^>]+>)+/)){r.innerHTML=e.obj}else{r.innerHTML='<img src="'+c+'images/ui_load.gif" alt="加载中" style="margin:10px 30px;" />';A.aj(e.obj,e.data||"",function(t){if(e.fun){e.fun(t,r)}else{r.innerHTML=t}n.ct()})}}else{this.G_d.innerHTML='<p class="ui_msg">'+e.s+"</p>"}this.ct(e.wh)}this.xs(.1)};this.ct=function(e){var e=e||[false,false];this.G_d.style.top="0px";this.G_d.style.left="0px";var i=t.documentElement.clientHeight;var s=t.documentElement.clientWidth;if(e[0]){this.G_d.children[1].style.width=e[0]+"px";this.G_d.children[1].style.overflowX="hidden"}if(e[1]){this.G_d.children[1].style.height=e[1]+"px";this.G_d.children[1].style.overflowX="hidden";this.G_d.children[1].style.overflowY="auto"}else if(i-20<this.G_d.offsetHeight){this.G_d.children[1].style.height=i-20-39+"px";this.G_d.children[1].style.overflowX="hidden";this.G_d.children[1].style.overflowY="auto"}this.G_d.style.top=(i-this.G_d.offsetHeight)/2+Math.max(t.documentElement.scrollTop,t.body.scrollTop)+"px";this.G_d.style.left=(s-this.G_d.offsetWidth)/2+Math.max(t.documentElement.scrollLeft,t.body.scrollLeft)+"px"};this.xs=function(i){var s=this;this.G_d.style.filter="alpha(opacity="+i*100+")"+this.iecss;this.G_d.style.opacity=i;if(t.all&&i>.9&&e.css=="ui_box"){this.G_d.style.filter=""}if(typeof e.css=="string"){if(i<1){setTimeout(function(){s.xs(i+.1)},5)}else if(e.c){setTimeout(function(){s.yc(1)},e.t||2e3)}}else{if(i<.3){setTimeout(function(){s.xs(i+.2)},5)}else if(e.c){setTimeout(function(){s.yc(.3)},e.t||2e3)}}};this.yc=function(i){var s=this;this.G_d.style.filter="alpha(opacity="+i*100+")"+this.iecss;this.G_d.style.opacity=i;if(typeof e.css=="string"){if(i>0){setTimeout(function(){s.yc(i-.4)},5)}else{t.body.removeChild(this.G_d)}}else{if(i>0){setTimeout(function(){s.yc(i-.1)},10)}else{t.body.removeChild(this.G_d)}}};this.cj()}})(window);